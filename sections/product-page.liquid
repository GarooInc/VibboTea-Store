<!-- Start of Judge.me code -->{% assign has_legacy = false %}{% if product.metafields.judgeme.widget.size > 20 %}{% assign has_legacy = true %}{% endif %}<div style='clear:both'></div><div id='judgeme_product_reviews' class='jdgm-widget jdgm-review-widget' data-product-title='{{ product.title | escape }}' data-id='{{ product.id }}' data-product-id='{{ product.id }}' data-widget='review' data-auto-install='false' data-shop-reviews-count='{{ shop.metafields.judgeme.shop_reviews_count | default: 0 | escape }}' data-entry-point='review_widget.js' data-entry-key='review-widget/main.js'>{% if has_legacy %}<div class='jdgm-legacy-widget-content' style='display: none;'>{{ product.metafields.judgeme.widget }}</div>{% endif %}</div>{% if product.metafields.judgeme.review_widget_data %}<script>jdgm.data ||= {}; jdgm.data.reviewWidget ||= {}; jdgm.data.reviewWidget[{{ product.id }}] = {{ product.metafields.judgeme.review_widget_data }}</script>{% endif %}<!-- End of Judge.me code -->
<div class="grid grid-cols-1 md:grid-cols-2 gap-8 items-center md:px-5 md:py-10 md:pt-40 pt-25">

  {% if product %}
    {% assign current_variant = product.selected_or_first_available_variant %}

    {% if product.media.size > 1 %}

    <!-- SLIDER -->
    <div class="relative w-full overflow-hidden rounded-xl" id="productSlider">
      
      <div class="flex transition-transform duration-500" id="sliderTrack">
        {% for media in product.media %}
          {% if media.media_type == "image" %}
            
            <div class="w-full shrink-0 aspect-square overflow-hidden rounded-xl">
              <img
                src="{{ media | image_url: width: 1200 }}"
                alt="{{ media.alt | escape }}"
                class="w-full h-full object-cover object-[center_55%]"
                width="{{ media.width }}"
                  height="{{ media.height }}"
              />
            </div>


          {% endif %}
        {% endfor %}
      </div>


      <!-- BOTONES -->
      <button 
        class="absolute left-0 top-1/2 -translate-y-1/2   
        text-black px-3 py-2  "
        onclick="slidePrev()">
        {% render 'arrow-slidder2' %}
      </button>

      <button 
        class="absolute right-0 top-1/2 -translate-y-1/2  
        text-black px-3 py-2 "
        onclick="slideNext()">
        {% render 'arrow-slidder' %}
      </button>

    </div>

        
    {% else %}
        <div class="product-media w-full justify-center ">
        {% if product.featured_media %}
            <img 
            src="{{ product.featured_media | image_url: width: 1200 }}"
            alt="{{ product.featured_media.alt | escape }}"
            class="w-full h-auto object-cover rounded-xl"
            width="{{ product.featured_media.width }}"
            height="{{ product.featured_media.height }}"
            />
        {% endif %}
        </div>

       
    {% endif %}
     <div class="product-info w-full  px-4">
        <h1 class="text-3xl md:text-4xl font-bricolage font-medium text-black mb-4">
          {{ product.title }}
        </h1>
        <div id="priceWrapper" class="py-4 flex items-center gap-4 transition-all duration-300">
          {% if current_variant.compare_at_price > current_variant.price %}
            <span class="text-2xl md:text-3xl text-gray-400 line-through">
              {{ current_variant.compare_at_price | money }}
            </span>

            <span class="text-2xl md:text-3xl text-red-700 font-light">
              {{ current_variant.price | money }}
            </span>
          {% else %}
            <span class="text-2xl md:text-3xl text-gray-700">
              {{ current_variant.price | money }}
            </span>
          {% endif %}
        </div>

        <div class='subscriptions_app_embed_block'></div>


        <p class="prose text-xs text-black font-bricolage pt-4">
            {{ product.description }}
        </p>

        <div class="subscriptions_app_embed_block"></div>

        


        {% comment %} variantes {% endcomment %}
        {% unless product.has_only_default_variant %}
          {% assign first_variant = product.selected_or_first_available_variant %}

          <div class="w-full grid grid-cols-3 md:gap-8 gap-4 pt-5 h-full">
            {% for variant in product.variants %}
              {% assign parts = variant.title | split: '/' %}
              {% assign servings = parts[0] | strip %}
              {% assign grams = parts[1] | strip | remove: 'gr' | strip %}

              <div
                class="variant-option rounded-xl min-h-[6vw] w-full flex flex-col 
                      items-center justify-center cursor-pointer border border-gray-400
                      transition-all duration-300
                      {% if variant.id == first_variant.id %}ring-2 ring-black scale-105{% endif %}"
                data-variant-id="{{ variant.id }}"
                data-price="{{ variant.price | money }}"
                data-price-raw="{{ variant.price }}"
                data-compare="{{ variant.compare_at_price | money }}"
                data-compare-raw="{{ variant.compare_at_price }}"
              >
                <p class="font-bricolage md:text-2xl text-md pt-3">
                  {{ servings }} servings
                </p>

                <p class="font-bricolage md:text-xl text-sm py-2">
                  {{ grams }} grams
                </p>
              </div>
            {% endfor %}
          </div>
          
        

        {% endunless %}


      <form method="post" action="{{ routes.cart_add_url }}" class="w-full md:py-4 items-end text-center mx-auto cursor-pointer">
        <input
          type="hidden"
          name="id"
          id="variantInput"
          value="{{ current_variant.id }}"
        >

        <button
          type="submit"
          {% comment %} {% unless current_variant.available %}disabled{% endunless %} {% endcomment %}
          class="bg-black flex items-center justify-center w-full rounded-3xl py-3 
                hover:opacity-70 transition-opacity disabled:opacity-50"
        >
          <span class="font-bricolage text-white xl:text-sm text-md uppercase font-light">
            {% comment %} {% if current_variant.available %} {% endcomment %}
              Add to cart
            {% comment %} {% else %}
              Sold out
            {% endif %} {% endcomment %}
          </span>
        </button>
      </form>


        

    </div>
        

  {% else %}
    <div class="col-span-2 text-center text-sm text-gray-500">No product selected in section settings.</div>
  {% endif %}

</div>

<script>
  const variants = document.querySelectorAll('.variant-option');
  const variantInput = document.getElementById('variantInput');
  const priceWrapper = document.getElementById('priceWrapper');
  const mainPrice = document.getElementById('mainPrice');

  variants.forEach(option => {
    option.addEventListener('click', () => {
      variants.forEach(v => {
        v.classList.remove('ring-2', 'ring-black', 'scale-105');
      });

      option.classList.add('ring-2', 'ring-black', 'scale-105');

      variantInput.value = option.dataset.variantId;

      priceWrapper.classList.add('opacity-0', 'translate-y-2');

      setTimeout(() => {
        const price = option.dataset.price;
        const compare = option.dataset.compare;

        if (compare && compare !== '') {
          priceWrapper.innerHTML = `
            <span class="text-3xl md:text-4xl text-gray-400 line-through">
              ${compare}
            </span>
            <span class="text-4xl md:text-5xl text-red-700 font-light">
              ${price}
            </span>
          `;
        } else {
          priceWrapper.innerHTML = `
            <span class="text-5xl md:text-6xl text-gray-700">
              ${price}
            </span>
          `;
        }

        priceWrapper.classList.remove('opacity-0', 'translate-y-2');
      }, 200);
    });
  });
</script>


<script>
    let currentSlide = 0;

    function slideNext() {
    const track = document.getElementById("sliderTrack");
    const slides = track.children.length;

    currentSlide = (currentSlide + 1) % slides;
    track.style.transform = `translateX(-${currentSlide * 100}%)`;
    }

    function slidePrev() {
    const track = document.getElementById("sliderTrack");
    const slides = track.children.length;

    currentSlide = (currentSlide - 1 + slides) % slides;
    track.style.transform = `translateX(-${currentSlide * 100}%)`;
    }
</script>


{% schema %}
{
  "name": "Description product",
  "settings": [],
  
  "presets": [{ "name": "Description product" }]
}
{% endschema %}